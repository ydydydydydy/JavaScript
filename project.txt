FSR 압력센서
- 0.5인치 지름의 둥근 센서 영역을 가지고 있는 압력 센서
- 센서 영역에 얼마나 많은 압력이 가해졌느냐에 따라 저항값이 변함
- 압력이 세게 가해질수록 저항은 낮아지며 압력이 가해지지 않으면 저항은 1Mohm이상이 된다
- 초정밀 측정은 불가능 / 연속적인 압력 측정에 유용

3축 자이로 센서
X,Y,Z축 값을 읽을 수 있다
각도, 가속도 측정하는 분야에 다양하게 활용 가능
가속도 센서는 센서가 움직이면서 변하는 가속도 (중력 포함)을 측정하는 거고,
-가속도 센서: 센서가 움직이면 변하는 가속도(중력포함) 측정
                 각도를 알아내는 방식 - x축과 y축 방향에 중력이 얼마나 작용했는지로 판단

x축과 y축 방향에 중력이 얼마나 작용했는지로 판단합니다.

스마트신발(자세교정)
걸음걸이 걸을 때 압력 측정


본 발명에 따른 걸음걸이 자세측정/교정용 스마트 신발은 센서 정보를 실시간으로 취득하는 마이크로 컨트롤러 보드; 
3축 가속도 센싱 정보, 위치 센싱 정보 및 스트레인 센싱 정보를 취득하는 통합센서모듈; 
상기 통합센서모듈로 획득한 센싱 정보를 컴퓨터에 전송하는 블루투스 모듈; 
센싱 정보의 아날로그 신호를 디지털 신호로 변환하는 아날로그디지털 변환기; 
센싱 정보의 디지털 신호에 들어 있는 주파수를 전처리하는 저역통과필터; 
상호상관분석 방법으로 보행 대칭성을 판단하는 기능이 내재된 컴퓨터; 
각 모듈에 전원을 공급하는 전원공급모듈;로 구성되는 것을 특징으로 한다. 
또한, 본 발명에 따른 걸음걸이 자세측정/교정용 스마트 신발의 구현방법은 신발에 부착된 스트레인센서를 통해 보행자의 기본 발 압력 데이터를 측정하는 단계; 
측정된 복수개의 기본 발 압력 데이터를 이용하여 기본 발 압력 데이터 대표값을 산출하는 단계; 
상기 기본 발 압력 대표값을 이용하여 상기 보행자의 보행 또는 직립 시 상기 보행자가 착용한 스마트 신발에 부착된 스트레인센서를 통해 측정한 발 압력 데이터를 보정하는 단계; 
보정된 발 압력 데이터를 이용하여 자세측정 및 교정을 위해 사용되는 압력 중심점과 중력 중심점을 계산하는 단계; 
상기 압력 중심점과 상기 중력 중심점을 이용하여 상기 보행자의 걸음걸이 자세를 분석하는 단계; 
산출된 자세분석 결과를 디스플레이시키는 단계;가 포함되는 것을 특징으로 한다.

데이터 확보방안


2. 자이로스코프 센서 이해하기
제가 쓴 센서 MPU6050은 3축 가속도 센서와 3축 자이로 센서가 같이 있습니다.
가속도 센서는 센서가 움직이면서 변하는 가속도 (중력 포함)을 측정하는 거고,
자이로 센서는 코리올리힘?을 측정해서 각속도를 측정하는 겁니다.

 

-가속도 센서
이 가속도 센서로 각도를 알아내는 방식이 뭐냐면

x축과 y축 방향에 중력이 얼마나 작용했는지로 판단합니다.

예를 들어 x축 방향으로 중력이 작용하고 있다면 그쪽으로 기울었다는 겁니다. (제대로 이해 못한 것 같습니다)

그래서 roll이나 pitch를 구하는 방식을 보면

roll = atan(yacc/zacc) * 180/pi 입니다.

 

가속도 센서의 단점은 굉장히 예민하기 때문에 노이즈가 많다는 겁니다.

그리고 z축 회전을 인식할 수 없습니다. 센서가 아무리 돌아봤자 z축(바닥과 수직)으로 받는 중력가속도에는 차이가 없기 때문입니다.

게다가 조사하면서 알았는데 충격적이게도 가속도 센서로는 움직임을 측정할 수가 없습니다.

원래 이걸로 테트리스 만들고 마법진을 그리면서 싸우는 마법사 게임을 만들려했는데 움직임을 측정할 수 없어서 기각됐습니다.

가속도 센서로 위치를 알려면 가속도를 적분을 두 번 해야되는데(가속도>속도>위치), 사실 적분이라는 게

속도 = 속도 + (이번 프레임 가속도 * deltaTime) 형식입니다.

이걸 한번 더하면 위치가 나오는데, 그러면 가속도 센서에서 인식된 그 오차가 엄청 뻥튀기 돼서 제대로 나오질 않습니다.

 

***별표 3개***

가속도 센서는 노이즈가 많지만 오차가 적고 (장기간 관측 시 유용)

자이로 센서는 오차가 누적되는 방식이지만 노이즈가 적습니다. (단기간 관측 시 유용)

 

이 두 가지를 합쳐버리는 필터가 있는데, 칼만 필터와 상보 필터에 대해 검색해 봤습니다.

정말 오랜시간 봤는데 이해를 못했습니다.

 -칼만 필터 : 결과값을 미리 예측하고, 실제 측정값과 비교하고 잘 버무려서 다음 결과값 예측 때 씁니다. (이해 못 했습니다.)

 -상보 필터 : 두 값을 n:m의 비율로 잘 섞는 방식입니다.

요정도로 이해를 했는데,

 

검색을 계속하다 보니 이렇게 두 측정값 모두 사용하는 과정을 dmp에서 해주는 거였다는걸 알게 됐습니다.

그래서 결론적으로는 그냥 내장된 dmp로 계산된 값을 사용하기로 했습니다.

 

 

결국 코드는 직접 쓴 부분은 없고 원래 예제에서 주석들 다 지우고, 쓸모없는 부분은 다 뺐습니다.

예를 들면 계속 initializing..을 출력하는 부분이나 (나중에 게임을 돌릴 땐 필요 없는 출력이라서)

키를 눌러야 값을 읽어오는 부분을 뻈습니다.

(스포일러)